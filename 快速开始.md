# WhisperLiveKit Docker éƒ¨ç½² - å¿«é€Ÿå¼€å§‹

## ğŸš€ ä¸€é”®å¯åŠ¨

```bash
# 1. å¤åˆ¶ç¯å¢ƒé…ç½®
cp .env.example .env

# 2. å¯åŠ¨æœåŠ¡ï¼ˆè‡ªåŠ¨é€‰æ‹©æœ€ç©ºé—²çš„ GPUï¼‰
./start.sh

# 3. æµ‹è¯•æœåŠ¡
./test_deployment.sh
```

## ğŸ“± è®¿é—®æœåŠ¡

å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥ä»ä»»æ„ IP è®¿é—®ï¼š

- **æœ¬æœºè®¿é—®**: http://localhost:8000
- **å±€åŸŸç½‘è®¿é—®**: http://æœåŠ¡å™¨IP:8000
- **API æ–‡æ¡£**: http://æœåŠ¡å™¨IP:8000/docs  
- **å¥åº·æ£€æŸ¥**: http://æœåŠ¡å™¨IP:8000/health

> æœåŠ¡å·²é…ç½®ä¸ºç›‘å¬ `0.0.0.0`ï¼Œå¯ä»ä»»æ„ IP è®¿é—®

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. Web UI ç•Œé¢
- âœ… å®æ—¶è¯­éŸ³è½¬æ–‡å­—
- âœ… è¯´è¯äººè¯†åˆ«
- âœ… æ·±è‰²/æµ…è‰²ä¸»é¢˜
- âœ… å¤šè¯­è¨€ç•Œé¢ï¼ˆä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ã€ç¹ä½“ä¸­æ–‡ï¼‰
- âœ… å‚æ•°å®æ—¶è°ƒæ•´

### 2. API æ¥å£
- âœ… WebSocket å®æ—¶è½¬å½•
- âœ… REST API æ–‡ä»¶è½¬å½•
- âœ… å®Œæ•´çš„ Swagger æ–‡æ¡£

### 3. æ™ºèƒ½èµ„æºç®¡ç† â­
- âœ… **æ‡’åŠ è½½**ï¼šå®¹å™¨å¯åŠ¨æ—¶ä¸å ç”¨ GPU
- âœ… **æŒ‰éœ€åŠ è½½**ï¼šé¦–æ¬¡ä½¿ç”¨æ—¶æ‰åŠ è½½æ¨¡å‹åˆ° GPU
- âœ… **è‡ªåŠ¨é‡Šæ”¾**ï¼šç©ºé—² 10 åˆ†é’Ÿè‡ªåŠ¨é‡Šæ”¾ GPU æ˜¾å­˜
- âœ… **è‡ªåŠ¨é‡è½½**ï¼šæ–°è¯·æ±‚è‡ªåŠ¨é‡æ–°åŠ è½½æ¨¡å‹

> è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [GPUèµ„æºç®¡ç†è¯´æ˜.md](GPUèµ„æºç®¡ç†è¯´æ˜.md)

## âš™ï¸ é…ç½®è¯´æ˜

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```bash
# æœåŠ¡ç«¯å£
WLK_PORT=8000

# GPU é€‰æ‹©ï¼ˆauto=è‡ªåŠ¨é€‰æ‹©ï¼Œæˆ–æŒ‡å®šå¦‚ "0,1"ï¼‰
CUDA_VISIBLE_DEVICES=auto

# æ¨¡å‹å¤§å°ï¼ˆtiny/base/small/medium/largeï¼‰
WLK_MODEL=medium

# æºè¯­è¨€ï¼ˆauto/en/zh/ja ç­‰ï¼‰
WLK_LANGUAGE=auto

# ç©ºé—²è¶…æ—¶ï¼ˆåˆ†é’Ÿï¼‰
WLK_IDLE_TIMEOUT=10

# å¯ç”¨è¯´è¯äººè¯†åˆ«
WLK_DIARIZATION=false

# ç¿»è¯‘ç›®æ ‡è¯­è¨€ï¼ˆå¯é€‰ï¼‰
WLK_TARGET_LANGUAGE=
```

## ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

### Web UI ä½¿ç”¨
1. æ‰“å¼€ http://localhost:8000
2. ç‚¹å‡»å³ä¸Šè§’è¯­è¨€åˆ‡æ¢åˆ°ä¸­æ–‡
3. ç‚¹å‡»"å¼€å§‹å½•éŸ³"æŒ‰é’®
4. å¼€å§‹è¯´è¯ï¼Œå®æ—¶æŸ¥çœ‹è½¬å½•ç»“æœ

### API è°ƒç”¨ç¤ºä¾‹

**Python WebSocket å®¢æˆ·ç«¯**:
```python
import asyncio
import websockets
import json

async def transcribe():
    uri = "ws://localhost:8000/asr"
    async with websockets.connect(uri) as ws:
        # æ¥æ”¶è½¬å½•ç»“æœ
        async for message in ws:
            data = json.loads(message)
            print(data.get('text'))

asyncio.run(transcribe())
```

**cURL æ–‡ä»¶è½¬å½•**:
```bash
curl -X POST "http://localhost:8000/api/transcribe" \
  -F "file=@audio.wav"
```

## ğŸ”§ ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart

# æŸ¥çœ‹ GPU ä½¿ç”¨æƒ…å†µ
docker exec whisperlivekit nvidia-smi

# è¿›å…¥å®¹å™¨
docker exec -it whisperlivekit bash
```

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ›´æ¢æ¨¡å‹ï¼Ÿ
A: ç¼–è¾‘ `.env` æ–‡ä»¶ä¸­çš„ `WLK_MODEL`ï¼Œç„¶åé‡å¯ï¼š
```bash
docker-compose restart
```

### Q: å¦‚ä½•å¯ç”¨è¯´è¯äººè¯†åˆ«ï¼Ÿ
A: è®¾ç½® `.env` ä¸­ `WLK_DIARIZATION=true`

### Q: ç«¯å£è¢«å ç”¨æ€ä¹ˆåŠï¼Ÿ
A: ä¿®æ”¹ `.env` ä¸­çš„ `WLK_PORT` ä¸ºå…¶ä»–ç«¯å£

### Q: GPU å†…å­˜ä¸è¶³ï¼Ÿ
A: ä½¿ç”¨æ›´å°çš„æ¨¡å‹ï¼ˆtiny æˆ– baseï¼‰

### Q: å¦‚ä½•æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Ÿ
A: 
```bash
docker-compose logs -f whisperlivekit
```

## ğŸ“š æ›´å¤šæ–‡æ¡£

- [å®Œæ•´éƒ¨ç½²æ–‡æ¡£](DEPLOYMENT.md)
- [åŠŸèƒ½å¢å¼ºè¯´æ˜](ENHANCEMENTS.md)
- [API å®¢æˆ·ç«¯ç¤ºä¾‹](examples/api_client.py)
- [åŸé¡¹ç›® README](README.md)

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚é‡é—®é¢˜ï¼š
1. æŸ¥çœ‹æ—¥å¿—ï¼š`docker-compose logs -f`
2. æ£€æŸ¥ GPUï¼š`nvidia-smi`
3. æµ‹è¯•å¥åº·ï¼š`curl http://localhost:8000/health`
4. æŸ¥çœ‹æ–‡æ¡£ï¼šhttp://localhost:8000/docs
